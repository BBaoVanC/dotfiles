#!/bin/sh

contents="$(xclip -selection c -o)"

if [ "$contents" != "Error: target STRING not available" ]; then
    # save the contents
    echo "$contents" > /tmp/clipedit_temp
    # open editor
    st -t "Clipboard Editor" -e $EDITOR /tmp/clipedit_temp
    # remove the last character (newline)
    truncate -s $(($(stat -c '%s' /tmp/clipedit_temp)-1)) /tmp/clipedit_temp
    # save to clipboard
    xclip -selection c -i < /tmp/clipedit_temp
    # remove temporary file
    rm /tmp/clipedit_temp
else
    dunstify -u normal "Clipboard empty" "Error: target STRING not available in clipboard"
fi
